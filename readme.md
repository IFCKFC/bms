# 书店管理系统

## 项目概述

本项目是一个基于 Flask 框架构建的书店管理系统，旨在帮助书店高效管理书籍、期刊、客户信息，以及借阅和销售记录。
系统提供了直观的用户界面，支持信息的添加、编辑、删除和搜索功能，同时具备库存管理和相关统计功能，能够满足书店日常运营的基本需求。

## 功能特性

1. **书籍管理**
   - 添加新书籍，包括书名、作者、出版社、出版年份、ISBN、类别、价格和库存等信息。
   - 编辑和删除书籍信息。
   - 根据书名、作者、类别进行搜索。
2. **期刊管理**
   - 添加新期刊，包括期刊名、出版社、出版频率、ISSN、类别、价格、库存和最新期号等信息。
   - 编辑和删除期刊信息。
   - 根据期刊名、出版社、类别、最新期号进行搜索。
3. **客户管理**
   - 添加新客户，包括姓名、电话、邮箱、地址和会员类型等信息。
   - 编辑和删除客户信息。
   - 根据客户姓名、电话、邮箱进行搜索。
4. **销售管理**
   - 记录新的销售交易，包括商品类型（书籍或期刊）、商品选择、客户选择、数量、单价和总价等信息。
   - 自动减少库存。
   - 根据商品名称、客户名称、销售日期进行搜索。
   - 删除销售记录时恢复库存。
5. **借阅管理**
   - 添加新的借阅记录，包括借阅类型（书籍或期刊）、商品选择、客户选择和应还日期等信息。
   - 自动减少库存。
   - 根据书籍标题和客户姓名进行搜索。
   - 处理归还操作，更新借阅记录状态和库存。
   - 删除借阅记录。
6. **库存管理**
   - 系统会在借阅和归还、销售和删除销售记录时自动更新库存。
   - 提供库存状态视图，显示库存数量和可借阅状态。
7. **统计功能**
   - 首页显示书籍、期刊、客户和未归还借阅记录的数量。
   - 显示最近的借阅和销售记录。

## 技术栈

- **后端**：Flask 框架，使用 Flask-SQLAlchemy 进行数据库操作，数据库采用 SQLite。
- **前端**：HTML、CSS（使用 Tailwind CSS 进行样式设计）、JavaScript（用于表单验证和动态交互）。
- **模板引擎**：Jinja2，用于渲染 HTML 模板。

## 环境要求

- Python 3.x
- 所需的 Python 库可通过 `requirements.txt` 文件进行安装：

```bash
   pip install -r requirements.txt
```

## 项目结构一览

bms/
├── app.py # Flask 应用的主文件，包含路由和模型定义
├── instance/
│ ├── bookstore.db # SQLite 数据库文件
│ └── init.sql # 数据库初始化脚本，包含表结构和触发器的创建
├── templates/
│ ├── base.html # 基础模板文件，定义了页面的基本结构和样式
│ ├── add_book.html # 添加书籍的页面模板
│ ├── add_journal.html # 添加期刊的页面模板
│ ├── add_customer.html # 添加客户的页面模板
│ ├── add_borrow.html # 添加借阅记录的页面模板
│ ├── add_sale.html # 添加销售记录的页面模板
│ ├── books.html # 书籍管理页面模板
│ ├── journals.html # 期刊管理页面模板
│ ├── customers.html # 客户管理页面模板
│ ├── borrows.html # 借阅记录管理页面模板
│ ├── sales.html # 销售记录管理页面模板
│ ├── returns.html # 归还处理页面模板
│ ├── index.html # 首页模板
│ └── statistics.html # 统计信息页面模板
└── static/
└── upc_logo.jpeg # 静态图片文件(中国石油大学(华东)校徽)

## 数据库配置

在 app.py 中，数据库使用 SQLite，配置如下：

```python
   app.config['SQLALCHEMY_DATABASE_URI'] ='sqlite:///bookstore.db'
```

可根据需要修改数据库连接字符串以使用其他数据库，如 MySQL 或 PostgreSQL。

## 运行项目

1. 确保已经安装了所需的 Python 库。
2. 执行以下命令启动 Flask 应用：

```bash
   python bms/app.py
```

3. 打开浏览器，访问 http://127.0.0.1:5000 即可使用系统。

## 使用说明

1. **首页**
   - 显示书籍、期刊、客户和未归还借阅记录的数量。
   - 显示最近的借阅和销售记录。
2. **书籍管理**
   - 点击 “添加书籍” 按钮，填写书籍信息并提交。
   - 在搜索框中输入关键词，可根据书名、作者、类别进行搜索。
   - 点击书籍列表中的 “编辑” 按钮，可修改书籍信息。
   - 点击书籍列表中的 “删除” 按钮，可删除书籍信息。
3. **期刊管理**
   - 点击 “添加期刊” 按钮，填写期刊信息并提交。
   - 在搜索框中输入关键词，可根据期刊名、出版社、类别、最新期号进行搜索。
   - 点击期刊列表中的 “编辑” 按钮，可修改期刊信息。
   - 点击期刊列表中的 “删除” 按钮，可删除期刊信息。
4. **客户管理**
   - 点击 “添加客户” 按钮，填写客户信息并提交。
   - 在搜索框中输入关键词，可根据客户姓名、电话、邮箱进行搜索。
   - 点击客户列表中的 “编辑” 按钮，可修改客户信息。
   - 点击客户列表中的 “删除” 按钮，可删除客户信息。
5. **销售管理**
   - 点击 “新增销售” 按钮，选择商品类型、商品、客户，填写数量、单价，系统会自动计算总价，然后提交。
   - 在搜索框中输入关键词，可根据商品名称、客户名称、销售日期进行搜索。
   - 点击销售记录列表中的 “删除” 按钮，可删除销售记录并恢复库存。
6. **借阅管理**
   - 点击 “新增借阅” 按钮，选择借阅类型、商品、客户，填写应还日期，然后提交。
   - 在搜索框中输入关键词，可根据书籍标题和客户姓名进行搜索。
   - 点击借阅记录列表中的 “处理归还” 按钮，可处理归还操作，更新借阅记录状态和库存。
   - 点击借阅记录列表中的 “删除” 按钮，可删除借阅记录。
7. **归还处理**
   - 在归还处理页面，可搜索未归还的借阅记录。
   - 点击 “处理归还” 按钮，可处理归还操作，更新借阅记录状态和库存。
8. **统计信息**
   - 显示总书籍数、总期刊数、总客户数、总借阅数和总销售数。

## 注意事项

1. 请确保数据库连接配置正确，否则可能会导致应用无法正常运行。
2. 在进行数据操作时，请按照页面提示填写正确的信息，避免出现错误。
3. 当库存不足时，无法进行借阅和销售操作。

## 贡献与反馈

如果您在使用过程中遇到问题或有任何建议，请在 https://github.com/IFCKFC/bms 随时提交 issue 或 pull request，该著作权 来自 中国石油大学(华东) 计算 23 级 龍同学。
十分欢迎社区的贡献，共同完善这个项目。

以上内容可以帮助用户快速了解项目的功能、环境要求、运行步骤和使用方法，同时也提供了项目结构和注意事项等信息。你可以根据实际情况对内容进行调整和补充。
